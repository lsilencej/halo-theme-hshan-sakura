var post={appreciateModel:function(){$(".appreciate-btn").on("click",function(t){$(".qr-code-wrap").velocity("transition.expandIn",{duration:300}),$(document).one("click",function(){$(".qr-code-wrap").velocity("transition.expandOut",{duration:300})}),t.stopPropagation()})},toggleSocialShare:function(){$(".share-btn").on("click",function(t){var o=$("#socialShare");o.hasClass("show")?$("#socialShare").velocity("transition.slideUpOut",{duration:300}):$("#socialShare").velocity("transition.slideDownIn",{duration:300}),o.toggleClass("show")})},appreciate:function(){$(".qr-code").on("click",function(t){t.stopPropagation()}),$(".closinglayer").on("click",function(t){$(".qr-code-wrap").velocity("transition.expandOut",{duration:300})}),$(".zfb-btn").on("click",function(t){$(".qr_code_zfb").css("height","300px"),$(".qr_code_wx").css("height","0")}),$(".wx-btn").on("click",function(t){$(".qr_code_wx").css("height","300px"),$(".qr_code_zfb").css("height","0")})},removeFirstUL:function(){var t=document.getElementById("post-content");if(t){var o=t.firstElementChild.nodeName;"UL"===o&&$(t.firstElementChild).hide()}},getScrollTop:function(){return document.documentElement.scrollTop||document.body.scrollTop},initToc:function(){if(!($("#main").find("#toc").length<1)){var t="h1,h2,h3,h4,h5,h6",o="#post-article-content";tocbot.init({tocSelector:"#toc",contentSelector:o,headingSelector:t,scrollSmooth:!0,headingsOffset:0-$("#postHeader").height(),hasInnerContainers:!1}),$(".toc-link").prepend(document.createElement("span")),$(".toc-link span").addClass("toc-link-dot"),post.positionToc()}},scrollTocFixed:function(){post.checkToc()||document.removeEventListener("scroll",post.tocScroll,!1),document.addEventListener("scroll",post.tocScroll,!1)},tocScroll:function(t){var o="#toc",e=$("#tocFlag");if(1!==e.length)return!1;var n=$(o),i=e.offset().top-.5*$(window).height(),c=post.getScrollTop(),r=$("#postHeader").height();c>r/2?n.show():n.hide();var s=document.querySelector(o);if(s&&s.getBoundingClientRect()){var a=s.getBoundingClientRect().height;c>i-.5*a?n.addClass("toc-right-fixed"):n.removeClass("toc-right-fixed"),post.tocParentActive(),post.positionToc()}},checkToc:function(){var t=$("#tocFlag");return 1===t.length},positionToc:function(){var t=document.body.clientWidth,o=document.getElementById("toc");o&&(o.style.left=(t-768)/2+820+"px")},readProgress:function(){var t=$("#main"),o=$("#readProgress .read-progress-bar"),e=function(){var e=t.height()-window.innerHeight;if(!(e<=0)){var n=window.pageYOffset-t.offset().top,i=n/e*100+"%";o.width(i)}};displayReadProgress&&e(),$(window).on("scroll",function(){displayReadProgress&&e()})},initViewer:function(){document.getElementById("post-content")&&new Viewer(document.getElementById("post-content"),{toolbar:!1})},loadHighlight:function(){for(var t=document.querySelectorAll(".post-page pre code"),o=0;o<t.length;o++){var e=t[o];hljs.highlightBlock(e),$("code.hljs").each(function(t,o){hljs.lineNumbersBlock(o)})}},tocHover:function(){$(".toc-list-item span").hover(function(){$(this).parent().find("a.toc-link:first").addClass("toc-hover")},function(){$(this).parent().find("a.toc-link:first").removeClass("toc-hover")})},tocParentActive:function(){var t=$(".is-active-li").parents("ol.toc-list.is-collapsible");t&&t.each(function(){$(this).parent().find("a.toc-link:first").addClass("toc-hover")});var o=$("ol.toc-list.is-collapsible.is-collapsed");o&&o.each(function(){$(this).parent().find("a.toc-link:first").removeClass("toc-hover")})},shareIcon:function(){var t={sites:["google","twitter","facebook","weibo","qq","tencent","qzone","linkedin","wechat","douban","diandian"],disabled:socialDisabled.split(",")};socialShare(".social-share",t)}};$(function(){post.appreciate(),post.initToc(),post.removeFirstUL(),post.scrollTocFixed(),post.readProgress(),post.loadHighlight(),post.appreciateModel(),post.toggleSocialShare(),post.initViewer(),post.tocHover()});